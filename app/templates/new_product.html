{% load bootstrap4 %}
{% load staticfiles %}
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>New Product</title>
    {{form.media}}
    {% block styles %}
    {% bootstrap_css %}
    {% endblock %}
  </head>
  <body>
  <div class="container">
    <div class="row">
      <div class="col-md-4"></div>

      <div class="col-md-4">

    <form  action="{%url 'new_product'%}" id="newproductForm"  method="post" enctype="multipart/form-data" data-sub_categories-url="{% url 'ajax_load_sub_categories' %}" novalidate>
    {%csrf_token%}

    {% bootstrap_form form%}
    <input type="submit" class="btn btn-primary btn-md" value="addProduct">
  </form>
</div>       <div class="col-md-4">

   {% block scripts %}
   <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  {% bootstrap_javascript %}
  {% endblock %}
</div>

</div>
</div>


  </body>
</html>
{% block content %}

  <!-- <h2>Product Form</h2>

  <form method="post" id="newproductForm" data-sub_categories-url="{% url 'ajax_load_sub_categories' %}" novalidate>
    {% csrf_token %}
    <table>
      {{ form.as_table }}
    </table>
    <button type="submit">Save</button>
    <a href="{% url 'new_product' %}">Checkout</a>
  </form> -->

  
  <script>

    $("#id_category").change(function () {
      var url = $("#newproductForm").attr("data-sub_categories-url");
      var categoryId = $(this).val();

      $.ajax({
        url: url,
        data: {
          'category': categoryId
        },
        success: function (data) {
          $("#id_sub_category").html(data);
        }
      });

    });
  </script>
  

{% endblock %}

